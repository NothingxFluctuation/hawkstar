/*! updated; 07-26-2018 09:21 PM **/


Modulr.define("fox-news.section-fronts:config",["require","jquery","cdn"],function(require,$){var config={};return config.cdn=require("cdn"),config});
Modulr.define("fox-news.section-fronts:helper",["require","jquery","akamai.time","core.base:utils/detector"],function(require,$,time){var Detector=require("core.base:utils/detector"),Helper=function(){};return Helper.prototype.getCurrentView=Detector.current,Helper.prototype.getCurrentTime=function(){return time.getCurrent()},Helper.prototype.getSectionId=function(){return $('meta[name="prism.section"]').attr("content")||null},Helper.prototype.isAuthor=function(){return!!$("body").hasClass("cmsauthor-gui__mode-author")},Helper.prototype.ModuleLoader=function(list){return new function(){function execCallbacks(){for(;CALLBACK_QUEUE.length>0;){var fn=CALLBACK_QUEUE.shift();"function"==typeof fn&&fn()}}var Proto=this,INITIALIZED=!1,CALLBACK_QUEUE=[];require(list,function(){var args=Array.prototype.slice.call(arguments);Helper.prototype.execModules(args),INITIALIZED=!0,execCallbacks()}),Proto.ready=function(callback){INITIALIZED?callback():CALLBACK_QUEUE.push(callback)}}},Helper.prototype.execModules=function(modules){for(var i=0;i<modules.length;i++){var module=modules[i];"object"==typeof module&&"function"==typeof module.init&&module.init()}},new Helper});
Modulr.define("fox-news.section-fronts:main",["require","jquery","helper","router","core.components:auth","core.base:utils/page.reload"],function(require,$,Helper){var Router=require("router");(require("core.components:auth").initNew(),Helper.isAuthor())||require("core.base:utils/page.reload").set(10);var SHARED_MODULES=["modules/video.modal","core.base:modules/header","core.base:modules/breaking-news","modules/newsletters","modules/loadmore","modules/outbrain","core.components:embed-video"],App=function(){this.set=function(callback){Router.ready(callback)}};return SHARED_MODULES.length>0&&require(SHARED_MODULES,function(){var args=Array.prototype.slice.call(arguments);Helper.execModules(args),Router.ready()}),new App});
Modulr.define("fox-news.section-fronts:models/data",["require","jquery"],function(require,$){return new function(){Proto=this,Proto.get=function(){return"sample data"}}});
Modulr.define("fox-news.section-fronts:models/load.more",["require","jquery"],function(require,$){function getFeedUrl(config,lastPubDate){return[config.path,config.selectors,lastPubDate,config.extension].join(".")}function getPubDate(item){return item.find("meta[itemprop='datePublished']").attr("content")||AKAMAI_TIME_HELPER.getCurrent().getTime()}var section=$("meta[name='prism.section']").attr("content"),subsection=$("meta[name='prism.subsection1']").attr("content"),PREVENT_MULTI_CLICK=!1,LOADMORE_EVENTS=function(){for(var types=["loading","loaded"],events={},i=0;i<types.length;i++){var type=types[i],id=["CQ.LoadMoreEvent",type].join(":");events[type]=id}return events}(),SECTION_PLAYLIST_ID=function(){var playlist={politics:"928378949001",us:"921261890001","us/education":"941536881001","us/terror":"941536878001",opinion:"940325740001",entertainment:"929831930001",tech:"929831913001",science:"1821663211001",health:"930909749001",travel:"1034196603001",leisure:"931078438001","leisure/auto":"931078420001","leisure/food-drink":"932063991001",world:"922779230001",sports:"930909752001",weather:"929831922001"},ret=!1;for(var i in playlist){var val=playlist[i],sp=i.split("/");if(sp[1]&&sp[0]===section&&sp[1]===subsection){ret=val;break}sp[0]===section&&(ret=val)}return ret}();return function(target,config){function renderItems(markup){var html=$("<div></div>").append(markup||"").children();setAssociatedVideoPlaylistId(html),"fox-news-specials"!==subsection&&"fox-news-celebrates"!==section||window.loadDomEl(html),"personalities"===subsection&&html.hide(),html.length>0?"personalities"===subsection?(list.append(html.not("li:nth-child(4)")),html.show()):list.append(html):btn.hide(),btn.removeClass("loading")}function getFeed(callback){var url=getFeedUrl(config,_lastPubdate);$.ajax({url:url}).done(function(data){callback(data),triggerEvent("loaded",{config:config,lastPubDate:_lastPubdate,data:data}),PREVENT_MULTI_CLICK=!1}).fail(function(){btn.hide()})}function getLastItem(){return list.find(itemSelector).last()}function triggerEvent(type,data){var id=LOADMORE_EVENTS[type]||!1;id&&target.trigger(id,data)}function setAssociatedVideoPlaylistId(target){if(!SECTION_PLAYLIST_ID)return!1;target.each(function(){var elm=$(this);if(elm.hasClass("video-ct")){var a=elm.find("h4:first a"),href=a.prop("href");a.prop("href",href+"?playlist_id="+SECTION_PLAYLIST_ID)}})}var nextData=[];if(0===target.length)return!1;if(target.attr("data-init"))return!1;target.attr("data-init","1");var Proto=this,_lastPubdate=!1,IS_LOADING=!1;config=config||{},_.merge(config,{path:target.attr("data-path"),selectors:target.attr("data-selectors"),extension:target.attr("data-extension")||"html",size:config.size||target.attr("data-loadsize")||1});var btn=target.find(".js-load-more"),list=target.find(config.listSelector||".js-infinite-list"),itemSelector=config.itemSelector||"> li";Proto.loadNext=function(){if(IS_LOADING)return!1;IS_LOADING=!0,triggerEvent("loading"),btn.addClass("loading"),_lastPubdate=getPubDate(getLastItem()),$.ad&&$.ad.track&&!config.loadmore&&$.ad.track({"show-more":{}}),0===_.size(nextData)?getFeed(function(markup){IS_LOADING=!1,renderItems(markup),Proto.checkNext()}):(renderItems(nextData[nextData.length-1]),Proto.checkNext(),IS_LOADING=!1)},Proto.checkNext=function(){_lastPubdate=getPubDate(getLastItem()),getFeed(function(markup){if(void 0===markup)return void btn.hide();nextData.push(markup)})},btn.unbind("click").bind("click",function(evt){return evt.preventDefault(),!PREVENT_MULTI_CLICK&&(PREVENT_MULTI_CLICK=!0,Proto.loadNext(),!1)}),setAssociatedVideoPlaylistId(list.find(itemSelector))}});
Modulr.define("fox-news.section-fronts:modules/loadmore",["require","jquery","lodash","models/load.more"],function(require,$,_,LoadMore){var main=$(".main-content .js-infinite-list-component");if(0===main.length)return!1;var mainConfig={listSelector:".js-infinite-list",itemSelector:"> article"};main.each(function(){new LoadMore($(this),mainConfig)})});
Modulr.define("fox-news.section-fronts:modules/newsletters",["require","jquery","lodash","helper","core.plugins:NewslettersForm"],function(require,$,_){var SLIDs={politics:"3DC725E303A24F8DD0ED1879E2BC6618",us:"3DC725E303A24F8DB05092D232355E43",world:"3DC725E303A24F8DB05092D232355E43",sports:"3DC725E303A24F8DB05092D232355E43",opinion:"3DC725E303A24F8D95ACD1C9C0564C20",entertainment:"3DC725E303A24F8D9C92271F5026F381","food-drink":"3DC725E303A24F8D1C12D1E24CDEA25E",health:"3DC725E303A24F8DA5DBC7FFD49BC2B8",travel:"3DC725E303A24F8DE5173CCC4F027046"},Helper=require("helper"),Newsletter=require("core.plugins:NewslettersForm");return new function(){var defaultSLID=SLIDs[Helper.getSectionId()]||null;this.init=function(SLID){var form=$("form.form-newsletter");if(0===form.length&&defaultSLID)return!1;var input=form.find("input[type='email']"),error_msg=(form.find("input[type='submit']"),form.siblings(".message.error")),success_msg=form.siblings(".message.success"),close_btn=form.siblings(".message").find(".close a"),onError=function(){form.addClass("hide"),error_msg.removeClass("hide")},onSuccess=function(){form.addClass("hide"),success_msg.removeClass("hide")};new Newsletter({elm:form,SLID:SLID||defaultSLID,INPUT:input,INPUT_STR:" ",onError:onError,onSuccess:onSuccess}),close_btn.on("click",function(evt){evt.preventDefault(),input.val(" "),success_msg.addClass("hide"),error_msg.addClass("hide"),form.removeClass("hide")})}}});
Modulr.define("fox-news.section-fronts:modules/outbrain",["require","jquery","core.plugins:OutbrainWidgetConnector"],function(require,$){var Connector=require("core.plugins:OutbrainWidgetConnector"),INITIALIZED=!1,PAGE_PERMALINK=function(loc){return loc.protocol+"//www.foxnews.com/"+loc.pathname}(window.location),OB_TEMPLATE=function(){var res="foxnews";return/foxbusiness\.com/.test(window.location.host)&&(res="foxbusiness"),res}();return new function(){var Proto=this,Outbrain=new Connector;Proto.init=function(){if(!INITIALIZED){INITIALIZED=!0;var target=$(".OUTBRAIN[data-widget-id], .vendor-unit.vendor-outbrain > div[data-widget-id]").filter(function(){var el=$(this),res=!0;return el.is(":visible")||(el.remove(),res=!1),res});0!==target.length&&Proto.set(target)}},Proto.set=function(target){function eachItem(elm){var widgetId=elm.attr("data-widget-id")||null,customLink=elm.attr("data-src")||null;return widgetId?(idArr.push(widgetId),{addWidgetType:"data-widget",widgetId:widgetId,permalink:customLink||permalink,Template:OB_TEMPLATE,langJS:"//widgets.outbrain.com/lang_en.js"}):null}var config=[],idArr=[],permalink=PAGE_PERMALINK;target.each(function(){if($(this).is(":empty")){$(this).addClass("OUTBRAIN");var item=eachItem($(this));item&&config.push(item)}}),config.length>0&&Outbrain.addWidget(config)}}});
Modulr.define("fox-news.section-fronts:modules/sample",["require","jquery","helper","models/data"],function(require,$,Helper){var Data=require("models/data");return function(){Proto=this,Proto.render=function(){console.log("EXAMPLE:",Data.get()),console.log("TIME:",Helper.getCurrentTime())},Proto.init=function(){this.render()}}});
Modulr.define("fox-news.section-fronts:modules/video.modal",["require","jquery","helper","keymaster"],function(require,$,Helper,key){"mobile"!==Helper.getCurrentView()&&require(["core.components:modal"],function(Modal){function filter(){return!!/video\.fox(news|business)\.com\/v\/([0-9]+)\//.test($(this).attr("href")||"")}function set(items){items=items.filter(filter),0!==items.length&&items.on("click",function(evt){var videoId=getVideoId($(this)),domain=$(this).attr("href").match(/fox(news|business)/),config={domain:domain[0]?domain[0]:"foxnews"};return key.ctrl||key.command?(window.open($(this).attr("href"),"_blank"),!1):videoId?(evt.preventDefault(),trigger(videoId,config),!1):void $(this).unbind("click").click()})}function getVideoId(el){var match=(el.attr("href")||"").match(/video\.fox(news|business)\.com\/v\/([0-9]+)\//);return match&&match[2]?match[2]:null}function trigger(videoId,config){if(!Instance){Instance=Modal.video(null)}Instance.set(videoId,config,function(VideoInstance){})}var Instance=null;!function(container){set(container.find('.content > .article a[href*="video.fox"]'))}($(".collection-section-bucket")),function(container){set(container.find('.content > .article a[href*="video.fox"]'))}($(".collection-spotlight")),function(container){set(container.find('.content > .article a[href*="video.fox"]'))}($(".collection-article-list")),function(container){set(container.find('.content > .article a[href*="video.fox"]'))}($(".collection-multi")),function(container){set(container.find('.content > .article a[href*="video.fox"]'))}($(".collection-trending")),function(container){set(container.find('.content > .article a[href*="video.fox"]'))}($(".collection-card-wrap"))})});
Modulr.define("fox-news.section-fronts:router",["require","jquery","helper"],function(require,$,Helper){return new function(){function isFN(){return"function"==typeof callback}function initialized(){if(CALLBACK_QUEUE.length>0)for(;CALLBACK_QUEUE.length>0;){var callback=CALLBACK_QUEUE.shift();callback()}INITIALIZED=!0}var Proto=this,SECTION_ID=Helper.getSectionId(),SECTION_INIT=SECTION_ID?["sections",SECTION_ID].join("/"):null,INITIALIZED=!1,REQUIRE_REQUESTED=!1,CALLBACK_QUEUE=[];Proto.ready=function(callback){INITIALIZED?isFN()&&callback():isFN()&&CALLBACK_QUEUE.push(callback),REQUIRE_REQUESTED||(REQUIRE_REQUESTED=!0,SECTION_INIT?require([SECTION_INIT],function(App){App.ready(function(){initialized()})}):initialized())}}});
Modulr.define("fox-news.section-fronts:sections/entertainment",["require","jquery","helper"],function(require,$,Helper){var MODULE_LIST=["modules/sample"];return new Helper.ModuleLoader(MODULE_LIST)});
Modulr.define("fox-news.section-fronts:sections/health",["require","jquery","helper"],function(require,$,Helper){var MODULE_LIST=["modules/sample"];return new Helper.ModuleLoader(MODULE_LIST)});
Modulr.define("fox-news.section-fronts:sections/opinion",["require","jquery","helper"],function(require,$,Helper){var MODULE_LIST=["modules/sample"];return new Helper.ModuleLoader(MODULE_LIST)});
Modulr.define("fox-news.section-fronts:sections/politics",["require","jquery","helper","ISA"],function(require,$,Helper,ISA){ISA.meta().channel.indexOf("fnc/politics/midterms-2018")>-1&&require(["fox-news.elections:main"]);var MODULE_LIST=[];return new Helper.ModuleLoader(MODULE_LIST)});
Modulr.define("fox-news.section-fronts:sections/science",["require","jquery","helper"],function(require,$,Helper){var MODULE_LIST=["modules/sample"];return new Helper.ModuleLoader(MODULE_LIST)});
Modulr.define("fox-news.section-fronts:sections/shows",["require","jquery","helper"],function(require,$,Helper){var MODULE_LIST=["modules/sample"];return new Helper.ModuleLoader(MODULE_LIST)});
Modulr.define("fox-news.section-fronts:sections/travel",["require","jquery","helper"],function(require,$,Helper){var MODULE_LIST=["modules/sample"];return new Helper.ModuleLoader(MODULE_LIST)});
Modulr.define("fox-news.section-fronts:sections/world",["require","jquery","helper"],function(require,$,Helper){var MODULE_LIST=["modules/newsletters"];return new Helper.ModuleLoader(MODULE_LIST)});
!function(Modulr,FNC){if(Modulr.getInstance("fox-news.section-fronts"))return!1;var config={instance:"fox-news.section-fronts",baseDomain:FNC.CDN.domain,baseUrl:"/static/orion/scripts/fox-news/section-fronts/app",masterFile:"/static/orion/scripts/core/utils/modulr/master.js",paths:{},packages:["core.plugins","core.video","core.components","core.templates","core.base",{"fox-news.elections":"/static/orion/scripts/fox-news/elections/2018/bootstrap.js"}],shim:{jquery:{src:"/static/orion/scripts/core/utils/jquery/core.js",exports:"jQuery"},lodash:{src:"/static/orion/scripts/core/utils/lodash.js",exports:"_"},"akamai.time":{src:"//global.fncstatic.com/static/v/all/js/geo.js",exports:"AKAMAI_TIME_HELPER"},"akamai.location":{src:"//global.fncstatic.com/static/v/all/js/geo.js",exports:"CONST_Akamai_GEO"},keymaster:{src:"/static/orion/scripts/core/utils/keymaster.js",exports:"key"}}},Instance=Modulr.config(config);Instance.define("cdn",function(){return FNC.CDN}),Instance.define("ISA",function(){return FNC.ISA}),Instance.require(["main"])}(window.Modulr,window.FNC);